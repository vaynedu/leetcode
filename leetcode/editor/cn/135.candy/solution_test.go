package leetcode

// 135.åˆ†å‘ç³–æœ

import (
	"testing"
)

/**
n ä¸ªå­©å­ç«™æˆä¸€æ’ã€‚ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ ratings è¡¨ç¤ºæ¯ä¸ªå­©å­çš„è¯„åˆ†ã€‚

 ä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹è¦æ±‚ï¼Œç»™è¿™äº›å­©å­åˆ†å‘ç³–æœï¼š


 æ¯ä¸ªå­©å­è‡³å°‘åˆ†é…åˆ° 1 ä¸ªç³–æœã€‚
 ç›¸é‚»ä¸¤ä¸ªå­©å­ä¸­ï¼Œè¯„åˆ†æ›´é«˜çš„é‚£ä¸ªä¼šè·å¾—æ›´å¤šçš„ç³–æœã€‚


 è¯·ä½ ç»™æ¯ä¸ªå­©å­åˆ†å‘ç³–æœï¼Œè®¡ç®—å¹¶è¿”å›éœ€è¦å‡†å¤‡çš„ æœ€å°‘ç³–æœæ•°ç›® ã€‚



 ç¤ºä¾‹ 1ï¼š


è¾“å…¥ï¼šratings = [1,0,2]
è¾“å‡ºï¼š5
è§£é‡Šï¼šä½ å¯ä»¥åˆ†åˆ«ç»™ç¬¬ä¸€ä¸ªã€ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå­©å­åˆ†å‘ 2ã€1ã€2 é¢—ç³–æœã€‚


 ç¤ºä¾‹ 2ï¼š


è¾“å…¥ï¼šratings = [1,2,2]
è¾“å‡ºï¼š4
è§£é‡Šï¼šä½ å¯ä»¥åˆ†åˆ«ç»™ç¬¬ä¸€ä¸ªã€ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå­©å­åˆ†å‘ 1ã€2ã€1 é¢—ç³–æœã€‚
     ç¬¬ä¸‰ä¸ªå­©å­åªå¾—åˆ° 1 é¢—ç³–æœï¼Œè¿™æ»¡è¶³é¢˜é¢ä¸­çš„ä¸¤ä¸ªæ¡ä»¶ã€‚



 æç¤ºï¼š


 n == ratings.length
 1 <= n <= 2 * 10â´
 0 <= ratings[i] <= 2 * 10â´


 Related Topics è´ªå¿ƒ æ•°ç»„ ğŸ‘ 1717 ğŸ‘ 0

*/

//leetcode submit region begin(Prohibit modification and deletion)

/*
è§£é¢˜æ€è·¯
è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„è´ªå¿ƒç®—æ³•é—®é¢˜ã€‚è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š
æ¯ä¸ªå­©å­è‡³å°‘åˆ†é…åˆ° 1 ä¸ªç³–æœ
ç›¸é‚»ä¸¤ä¸ªå­©å­ä¸­ï¼Œè¯„åˆ†æ›´é«˜çš„å­©å­ä¼šè·å¾—æ›´å¤šç³–æœ
è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ä¸¤æ¬¡éå†çš„è´ªå¿ƒç­–ç•¥ï¼š
ç¬¬ä¸€æ¬¡ä»å·¦åˆ°å³éå†ï¼Œç¡®ä¿å³è¾¹è¯„åˆ†é«˜çš„å­©å­æ¯”å·¦è¾¹çš„å­©å­è·å¾—æ›´å¤šç³–æœ
ç¬¬äºŒæ¬¡ä»å³åˆ°å·¦éå†ï¼Œç¡®ä¿å·¦è¾¹è¯„åˆ†é«˜çš„å­©å­æ¯”å³è¾¹çš„å­©å­è·å¾—æ›´å¤šç³–æœ
æœ€åå–ä¸¤æ¬¡éå†ç»“æœçš„æœ€å¤§å€¼ä½œä¸ºæ¯ä¸ªå­©å­çš„ç³–æœæ•°
*/
func candy(ratings []int) int {
	n := len(ratings)
	if n == 0 {
		return 0
	}

	candies := make([]int, n)
	for i := 0; i < n; i++ {
		candies[i] = 1
	}

	// ä»å·¦åˆ°å³éå†ï¼Œç¡®ä¿å³è¾¹è¯„åˆ†é«˜çš„å­©å­æ¯”å·¦è¾¹çš„å­©å­è·å¾—æ›´å¤šç³–æœ
	for i := 1; i < n; i++ {
		if ratings[i] > ratings[i-1] {
			candies[i] = candies[i-1] + 1
		}
	}
	// ä»å³åˆ°å·¦éå†ï¼Œç¡®ä¿å·¦è¾¹è¯„åˆ†é«˜çš„å­©å­æ¯”å³è¾¹çš„å­©å­è·å¾—æ›´å¤šç³–æœ
	for i := n - 2; i >= 0; i-- {
		if ratings[i] > ratings[i+1] {
			candies[i] = max(candies[i], candies[i+1]+1)
		}
	}

	total := 0
	for _, v := range candies {
		total += v
	}

	return total

}

//leetcode submit region end(Prohibit modification and deletion)

// æµ‹è¯•å‡½æ•°å®ç°
func TestCandy(t *testing.T) {
	tests := []struct {
		ratings  []int
		expected int
	}{
		{[]int{1, 0, 2}, 5},
		{[]int{1, 2, 2}, 4},
		{[]int{1, 3, 2, 2, 1}, 7},
		{[]int{1, 2, 3, 4, 5}, 15},
		{[]int{5, 4, 3, 2, 1}, 15},
		{[]int{1}, 1},
		{[]int{1, 1, 1, 1}, 4},
	}

	for i, test := range tests {
		result := candy(test.ratings)
		if result != test.expected {
			t.Errorf("Test case %d failed: expected %d, got %d", i+1, test.expected, result)
		}
	}
}
